angular.module("alpacaEditor",["swiperRepeat","alpacaViewer","alpacaSchemas","alpacaTypes"]),angular.module("alpacaEditor").directive("alpacaForm",["$compile","$templateRequest",function(e,t){var a=function(a,i,n){t(a.model.template).then(function(t){var n=angular.element(t);i.after(n),e(n)(a)})};return{restrict:"E",link:a,scope:{model:"=",schema:"="}}}]),angular.module("alpacaEditor").controller("alpacaEditorController",["$scope","$templateList","$schemas",function(e,t,a){e.templates=t.templates,console.log(t),e.survey={slides:[{id:1,title:"Slide 1",content:"Foo",template:"green"},{id:2,title:"Slide 2",content:"Bar",template:"orange"}]},e.selected=e.survey.slides[1],e.schemas=a.schemas,e.schema=e.schemas.orange,e.devices={iphone:{name:"iPhone",width:480,height:720,material_icon:"smartphone"},desktop:{name:"Desktop",width:1920,height:1080,material_icon:"desktop_windows"},tablet:{name:"Tablet",width:800,height:400,material_icon:"tablet"}},e.setDevice=function(t){e.selectedDevice=t,console.log("set device:",t)},e.$on("device-ready",function(){e.setDevice(e.devices.iphone)})}]),angular.module("alpacaEditor").directive("alpacaForm",["$compile","$templateRequest",function(e,t){var a=function(a,i,n){t("alpaca-type-"+a.slide.template).then(function(t){var n=angular.element(t);i.after(n),e(n)(a)})};return{restrict:"E",link:a}}]),angular.module("alpacaEditor").directive("alpacaField",["$compile","$templateRequest",function(e,t){var a=function(a,i,n){console.log(a.type),t("alpaca-type-"+a.type).then(function(t){var n=angular.element(t);i.after(n),e(n)(a)})};return{restrict:"E",link:a,scope:{model:"=",type:"=",field:"="}}}]),angular.module("alpacaEditor").directive("devicePreview",function(){var e=function(e,t,a){console.log(e.$parent);var i=angular.element(t).parent();i.width=e.$parent.frame_size.width,i.height=e.$parent.frame_size.height,console.log("device-size",e.$parent.frame_size);var n=angular.element(t);e.$watch("device",function(){var a=e.device;if(!angular.element(t).parent()[0])return!1;console.log(e.device);var l=i.width/i.height>a.width/a.height,r=l?i.height/a.height:i.width/a.width,o=l?a.width*i.height/a.height:i.width,c=l?i.height:a.height*i.width/a.width;n.css({background:"white"}),i.css({display:"flex","align-items":"center","justify-content":"center"}),n.css({zoom:r,width:o/r+"px",height:c/r+"px"});var h={x:-1*((Math.max(a.width,o)-i.width)/2),y:-1*((Math.max(a.height,c)-i.height)/2)};e.$parent.iframe.css({width:Math.max(a.width,o),height:Math.max(a.height,c),transform:"translate("+h.x+"px,"+h.y+"px)"}),console.log("device",a.width,a.height),console.log("parent",i.width,i.height),console.log("scale",r),console.log("new",o,c)})};return{restrict:"E",link:e,scope:{device:"="}}}),angular.module("alpacaEditor").directive("wrapInFrame",["$compile","$timeout",function(e,t){return{restrict:"E",scope:{},transclude:!0,replace:!1,link:function(t,a,i,n,l){t.$parent.frame_size={width:a.parent().width(),height:a.parent().height()},l(t.$parent,function(i,n){a.html("<iframe width='100%' height='100%'>");var l=a.find("iframe")[0];t.$parent.iframe=angular.element(l),l.onload=function(){t.$parent.linked=!0;var a=angular.element(l.contentWindow.document.body);$("link[rel='stylesheet'], link[type='text/css'], link[href$='.css']").clone().appendTo($("iframe").contents().find("head")),$('<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>').appendTo($("iframe").contents().find("head")),e(i)(t.$parent,function(e){a.append(e),t.$parent.$emit("device-ready")})},l.src=""})}}}]);
//# sourceMappingURL=alpaca-editor.min.js.map
